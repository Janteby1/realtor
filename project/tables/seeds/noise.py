
'''
list of zip codes, every zip code occurance represents one noise complaint int hat area (we dont care about the exact adress, the date, the reason, the type, ect)
Once we have this list we can just correspond it to the dict of zip codes to neighborhoods created
Every zip code match we just add one to the value of that neighborhood, then give each a scrore 
'''

'''
Note: 
The total value of noise complaints after the conversion is bigger than the original number of complaints becuase some zip codes 
cover two neighborhoods. In this case the noise complaint is counted twice, once for each neighborhood. 
'''
from tables.models import Neighborhood, Score


from tables.model import Score, Neighborhood

# these are the best matches from the dict conversion file with edits for nb names
best_matches ={'Breezy Point-Belle Harbor-Rockaway Park-Broad': ['11697'], 'East New York': ['11207'], 'Bushwick North': ['11237'], 'Elmhurst': ['11373'], 'South Ozone Park': ['11436'], 'Arden Heights': ['MISSING'], 'Central Harlem North-Polo Grounds': ['10039'], 'Westchester-Unionport': ['10461'], 'Rosedale': ['11422'], 'Schuylerville-Throgs Neck-Edgewater Park': ['10465'], 'New Brighton-Silver Lake': ['10301'], 'Crotona Park East': ['10460'], 'Prospect Heights': ['11238'], 'Morningside Heights': ['10027'], 'Bushwick South': ['11237'], 'Port Richmond': ['10302'], 	"Mariner's Harbor-Arlington-Port Ivory-Granite": ['10303'], 'Kew Gardens': ['11415'], 'Great Kills': ['10308'], 'East Elmhurst': ['11369'], 'Melrose South-Mott Haven North': ['10451'], 'Central Harlem South': ['10026'], 'Corona': ['11368'], 'West Village': ['10014', '10012'], 'Douglas Manor-Douglaston-Little Neck': ['11362'], 'Dyker Heights': ['11228'], 'Astoria': ['11103'], 'Belmont bronx': ['10458'], 'East Harlem North': ['10037'], 'Spuyten Duyvil-Kingsbridge': ['10463'], 'Longwood': ['10455'], 'Bensonhurst West': ['11214'], 'North Side-South Side': ['MISSING'], 'Sunset Park West': ['11220'], 'Battery Park City-Lower Manhattan': ['10280', '10038', '10004', '10006', '10005'], 	"Annadale-Huguenot-Prince's Bay-Eltingville": ['10312'], 'Fort Greene': ['11205'], 'Jackson Heights': ['11372'], 'Sunset Park East': ['11220'], 'Auburndale': ['11358'], 'West Farms-Bronx River': ['10460'], 'Greenpoint': ['11222'], 'New Dorp-Midland Beach': ['10306'], 'Oakland Gardens': ['11364'], 'College Point': ['11356'], 'Hunters Point-Sunnyside-West Maspeth': ['11104'], 'Jamaica': ['11432'], 'Chinatown': ['10013'], 'Flatbush': ['11226'], 'Madison': ['11229'], 'Allerton-Pelham Gardens': ['10312'], 'Bay Ridge': ['11209'], 'Queensboro Hill': ['11355'], 'Ocean Hill': ['11233'], 'Clinton': ['10036', '10019', '10018'], 'Brighton Beach': ['11235'], 'Eastchester-Edenwald-Baychester': ['10475'], 'Williamsbridge-Olinville': ['10467', '11249'], 'Woodside': ['11377'], 'Bath Beach': ['11214'], 'Briarwood-Jamaica Hills': ['11435'], 'Kensington-Ocean Parkway': ['11218'], 'West Concourse': ['10451'], 'Van Cortlandt Village': ['10468'], 'Stapleton-Rosebank': ['10305'], 'North Riverdale-Fieldston-Riverdale': ['10471'], 'Ridgewood': ['11385'], 'Cypress Hills-City Line': ['11208'], 'Gramercy': ['10003'], 'Ft. Totten-Bay Terrace-Clearview': ['11360'], 'Pelham Parkway': ['10062'], 'Maspeth': ['11378'], 'Hamilton Heights': ['10031'], 'Homecrest': ['11223'], 'Mott Haven-Port Morris': ['10454'], 'Richmond Hill': ['11418'], 'Queens Village': ['11428'], 'Canarsie': ['11236'], 'Cambria Heights': ['11411'], 'Bensonhurst East': ['11204'], 'Rossville-Woodrow': ['10309'], 'East Harlem South': ['10029'], 'Far Rockaway-Bayswater': ['11691'], 'Charleston-Richmond Valley-Tottenville': ['10307'], 'Lenox Hill-Roosevelt Island': ['10065'], 'Fresh Meadows-Utopia': ['11365'], 'Forest Hills': ['11375'], 'Lower East Side': ['10002'], 'West Brighton': ['10310'], 'Lindenwood-Howard Beach': ['11414'], 'Carroll Gardens-Columbia Street-Red Hook': ['11231'], 'Ozone Park': ['11417'], 'Bronxdale': ['10462'], 'Crown Heights South': ['11225'], 'Co-Op City': ['10475'], 'Bedford': ['11216'], 'Glen Oaks-Floral Park-New Hyde Park': ['11040'], 'Baisley Park': ['11434'], 'Queensbridge-Ravenswood-Long Island City': ['11106', '11101'], 'Kew Gardens Hills': ['11415'], 'Seagate-Coney Island': ['11224'], 'Pomonok-Flushing Heights-Hillcrest': ['11354', '11206'], 'Bedford Park-Fordham North': ['10458'], 'Van Nest-Morris Park-Westchester Square': ['10462'], 'Flushing': ['11354'], 'Oakwood-Oakwood Beach': ['10306'], 'Soundview-Bruckner': ['10472'], 'Stuyvesant Heights': ['11233'], 'Washington Heights South': ['10033'], 'Glendale': ['11385'], 'University Heights-Morris Heights': ['10453'], 'Old Astoria': ['11102'], 'Todt Hill-Emerson Hill-Heartland Village-Ligh': ['10304'], 'St. Albans': ['11412'], 'Parkchester': ['10462'], 'Washington Heights North': ['10040', '10032', '10033'], 'Elmhurst-Maspeth': ['11373'], 'Hudson Yards-Chelsea-Flat Iron-Union Square': ['10011', '10001'], 'Marble Hill-Inwood': ['10034'], 'Woodhaven': ['11421'], 'Stuyvesant Town-Cooper Village': ['10009', '10010'], 'Springfield Gardens North': ['11413'], 'Rego Park': ['11374'], 'New Springville-Bloomfield-Travis': ['10314'], 'Hollis': ['11423'], 'Springfield Gardens South-Brookville': ['11413'], 'Brooklyn Heights-Cobble Hill': ['11201'], 'Turtle Bay-East Midtown': ['10022'], 'Manhattanville': ['10027'], 'Lincoln Square': ['10023'], 'Murray Hill': ['10016'], 'Flatlands': ['11234'], 'East Concourse-Concourse Village': ['10451'], 'DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum H': ['11201', '11217'], 'Pelham Bay-Country Club-City Island': ['10464'], 'North Corona': ['11368'], 'Gravesend': ['11223'], 'Morrisania-Melrose': ['10456'], 'Old Town-Dongan Hills-South Beach': ['10305'], 'Bellerose': ['11426'], 'Mount Hope': ['10003'], 'East New York (Pennsylvania Ave)': ['11207'], 'South Jamaica': ['11433'], 'Brownsville': ['11212'], 'Grymes Hill-Clifton-Fox Hills': ['10301'], 'Windsor Terrace': ['11215'], 'Borough Park': ['11219'], 'Erasmus': ['11226'], 'Kingsbridge Heights': ['10463'], 'Highbridge': ['10452'], 'Midwood': ['11230'], 'Woodlawn-Wakefield': ['10466'], 'Whitestone': ['11357'], 'West New Brighton-New Brighton-St. George': ['10310'], 'Middle Village': ['11379'], 'East Flushing': ['11354'], 'Hunts Point': ['10474'], 'Crown Heights North': ['11225'], 'Hammels-Arverne-Edgemere': ['11692'], 'SoHo-TriBeCa-Civic Center-Little Italy': ['10013', '10007'], 'Midtown-Midtown South': ['10019'], 'Sheepshead Bay-Gerritsen Beach-Manhattan Beac': ['11235'], 'Soundview-Castle Hill-Clason Point-Harding Pa': ['10472'], 'East Tremont': ['10457'], 'Laurelton': ['11413'], 'Murray Hill-Kips Bay': ['10016'], 'Rikers Island': ['MISSING'], 'Starrett City': ['11239'], 'Bayside-Bayside Hills': ['11361'], 'Ocean Parkway South': ['11230'], 'Norwood': ['10467'], 'Claremont-Bathgate': ['10457'], 'Rugby-Remsen Village': ['11203'], 'Prospect Lefferts Gardens-Wingate': ['11225'], 'Jamaica Estates-Holliswood': ['11423'], 'Fordham South': ['10458'], 'East Williamsburg': ['11211'], 'Clinton Hill': ['11205'], 'Yorkville': ['10128'], 'Upper West Side': ['10024', '10025'], 'Steinway': ['11105'], 'East Village': ['10009'], 'Georgetown-Marine Park-Bergen Beach-Mill Basi': ['11234'], 'East Flatbush-Farragut': ['11203'], 'Grasmere-Arrochar-Ft. Wadsworth': ['10304'], 'Westerleigh': ['10314'], 'Williamsburg': ['11211'], 'Upper East Side-Carnegie Hill': ['10128', '10028', '10075', '10021']}
zip_codes = ["10128","11236","10038","11235","11219","11362","10003","11375","11211","11233","11206","11375","10022","11234","10065","10012","11201","11218","10023","10017","10017","10016","10021","10017","10038","10013","10011","10003","10028","10002","10024","10026","10001","10011","10005","10011","10018","11104","11375","11231","11375","10006","10065","10005","11411","10011","11211","11216","10017","11209","10009","10010","10034","10003","11217","11356","11249","10005","10017","10014","10065","10011","10065","10003","11355","10004","10009","10023","11106","11103","11215","11361","11433","11221","11358","11377","10016","11356","11418","10471","11372","11101","10065","10025","10128","10011","10022","10028","10016","11249","10019","10065","10065","10026","10065","10026","11104","10016","10065","10019","10025","10065","10004","10003","10019","10019","10005","10016","10011","10013","11372","10038","10019","10471","10019","10013","11215","11215","10012","10036","11215","10019","11215","11201","11211","11222","11216","11211","11211","11211","11216","11211","11249","11237","11211","11211","11237","10016","10016","10128","11372","11102","10011","10017","10038","10019","11385","10019","10005","11201","10011","11212","10011","11201","11201","10065","11235","11375","10463","10021","10038","10017","11419","11217","10010","11215","11375","10003","10017","10017","10016","11368","10013","10012","10012","10013","10013","10004","10002","11106","10038","11237","10014","10019","11207","11201","10011","10013","10011","10011","10016","10016","10016","10305","10011","11201","11205","10011","11215","10025","10026","11354","10028","11101","10025","11372","11201","10003","10016","10023","10016","10003","11211","11209","11211","10010","11201","11101","10038","10038","11201","11374","10012","10038","11106","11201","10463","11416","11215","11214","11218","10012","10019","11375","10018","11249","10005","10007","10280","11361","10003","11235","10013","11103","10019","10003","11375","11101","11215","11372","11355","11360","10010","11372","11432","11367","10007","11214","11226","10023","11361","10023","11206","10309","11234","10023","10005","11230","11216","10036","10036","11226","10038","11201","11211","10301","11204","10003","11223","10011","11216","10001","11216","11237","11215","11238","10303","11231","11374","11215","11231","10010","10312","10302","10019","10010","11215","11238","10036","11372","11225","11215","11238","11216","10017","11221","10038","11233","10022","11201","10004","10003","10025","11212","11233","10016","10036","10128","11201","10030","10011","11222","10007","11231","10019","10023","10012","10012","10001","11104","10471","11375","11237","11225","11207","11102","10012","10016","11375","11221","11370","11105","10012","10036","10012","10012","11234","10024","10001","11377","10003","10470","10004","11213","11235","11211","10280","10280","11214","10036","10464","10013","10011","11102","10019","10016","10024","10075","10305","10019","10025","10016","11220","10018","11204","11354","10016","11218","11223","10002","11214","10065","10012","11220","10010","11379","10019","10019","11219","11210","11208","11236","11226","11203","11204","11218","10036","10025","10016","11217","10016","10038","10022","10016","10016","10016","10016","10065","10023","10016","10065","10016","10065","10019","10016","10016","10016","10016","11237","10065","10006","10016","10016","10016","10065","10128","10016","10016","10016","10065","10065","10016","10016","10016","10065","10016","10016","10017","10016","10016","10016","10016","10065","10019","10016","10065","11209","11232","11201","11201","10003","11237","11215","10019","10003","11229","11377","11218","10065","11230","11428","11204","10075","10309","10017","11204","10012","11249","11249","10010","10012","10023","11237","10013","10013","10012","11372","11211","11373","11231","11220","11237","11237","10040","11237","10009","11249","11249","11220","10009","11231","11237","10009","10009","10009","10009","10009","10024","10018","11354","10075","10310","10013","10024","11207","11225","11237","11230","10472","10001","10028","11207","11222","10471","11229","11232","11204","11216","11238","11231","11412","10003","10301","11203","11211","11201","11238","11238","11209","11215","11223","11201","11229","11205","11212","11232","11225","11219","11201","11207","11221","11223","11214","11215","10305","11231","11225","11223","10301","11225","11217","11232","11217","11230","11230","11412","11201","11201","11238","11218","11249","11223","10022","11225","11214","10013","11213","10128","11238","10128","10128","10128","11217","10128","10128","10034","10037","10032","11374","10312","11231","11249","11234","11224","11217","11225","11206","11356","11374","10014","11374","11218","11215","11234","11211","11209","11220","11220","10310","11225","10002","11214","10025","11228","10301","11235","10075","11229","11235","11229","11224","10010","10128","11217","11229","11222","10305","10461","11238","11369","11233","10303","11209","11215","11106","11226","11239","11692","11378","11360","10001","11233","11229","10030","11208","11367","11223","11361","11231","11236","10308","11249","11209","11205","11221","11221","11211","11249","10308","10470","11210","11249","10036","10036","11234","11103","10017","10010","11238","11238","10006","10006","10006","10011","11104","10010","11211","11211","11201","11214","11238","11208","11201","10038","10019","10010","10012","11368","11201","11238","10307","10280","11215","11211","11364","11226","10017","10014","10036","11207","10026","11213","11238","11222","11214","10031","10314","11207","11232","10017","10012","11211","11214","10280","11230","11201","10303","11228","11249","11205","11231","11206","10010","11231","10065","10029","11206","11372","11201","11233","11222","11201","11201","11216","11370","10014","10014","10002","10019","11207","11103","11211","11223","10003","10010","10003","10025","10457","10019","11215","10019","10012","11201","10011","11201","10003","11213","10022","11218","10128","11207","10014","11229","10010","11213","10004","10002","10016","10012","11222","11201","10024","11418","10012","10038","11217","11432","10309","11222","10016","10016","11249","11216","11216","10025","10026","10013","11222","11233","11203","11203","11216","11356","11222","11354","10065","11201","11222","10128","11201","11216","11216","11221","11222","11221","10011","11222","11217","11249","11201","11235","11358","11201","10307","11101","11249","10301","10019","11221","10014","11217","11101","10038","11238","11361","11215","10466","11201","10011","11230","11222","10009","11375","11417","10025","11216","10013","11234","11211","10016","10019","10010","10016","10065","11235","10009","10016","11214","10016","11222","10302","11385","11215","11206","11215","10301","11215","10012","10013","10005","11214","10065","11237","11211","10016","10025","10025","11216","10001","11218","10014","11230","11223","10016","10019","11219","11222","10023","10019","10024","10022","10016","11201","10019","10001","10038","10038","11238","11238","10011","10024","11201","11231","10012","10016","10019","10001","10016","10016","10014","10016","10002","10010","10314","10314","11236","10128","11215","10128","10009","11215","11201","11414","11211","10019","10019","10010","11222","10017","11211","11210","10025","10016","10024","11209","11231","11237","11201","11234","11105","10010","10006","11385","11372","11201","11433","11204","11231","11215","11355","10301","10457","11217","11203","11225","11238","10027","11104","11235","10012","10012","11209","10023","10012","10012","10302","11234","10024","10019","10010","10018","10016","10026","11233","11236","11224","10302","11204","10036","11206","10019","11220","11416","10303","11201","11231","11217","11415","11218","11219","10012","10006","10002","10003","10007","10012","11206","10305","11225","10012","10038","10007","10012","10002","10007","10012","10013","10012","10007","10017","11204","11221","10013","11232","11216","10308","10014","10005","10308","10001","10304","11206","10304","11231","10312","10001","11226","10014","11238","11222","11229","11209","10011","10019","11228","11237","10024","10305","10014","11104","10128","10014","11223","10001","11234","10013","11216","10009","10013","11103","11217","11691","11427","10019","11104","11249","10463","10463","10036","10128","10301","11221","10009","10016","11238","10009","10012","11374","11101","11105","11208","11367","10005","10036","10011","10310","11104","10032","10023","11413","10302","11221","11213","11211","11217","10301","11216","11211","11216","11211","10021","10019","10128","11436","10128","11209","10128","10001","11421","11436","11102","10036","10035","11233","11217","11206","10011","10028","10014","11231","10028","11104","10016","10017","10019","10032","10016","11435","11217","10472","10469","11373","10314","10467","10013","10018","10012","10310","11217","10305","11228","11217","11215","10009","11217","11217","10305","10306","11224","11209","11229","11231","10009","11226","11226","11211","11214","10029","11231","10463","10065","11203","11238","11104","11101","10017","10306","11208","11101","11229","11212","11238","10128","10128","10014","11221","11238","11217","10306","10128","10002","10065","11238","11207","11204","10001","10036","10128","10128","11209","10009","10026","10010","11230","10013","10016","11205","10003","10017","11370","11101","11432","11385","11212","11375","11217","11201","11201","10471","10028","11215","10019","11205","10035","11432","11212","10033","10025","10128","11226","10036","11226","10019","10014","10011","10019","10011","10036","11235","11231","11231","10019","10019","10009","10009","11378","10024","11375","11356","11101","11365","11102","11229","10009","10010","11231","11238","10013","10026","11211","10016","11249","10038","11222","11101","10304","10004","10003","10013","11217","11432","10027","11221","11361","11201","11225","11205","11211","11219","11225","10038","10310","11201","11221","11218","11249","11215","11217","11221","11217","10011","11216","10001","10011","11201","10024","11238","11222","11211","11102","11102","11216","11207","11217","11201","11377","11211","11102","11218","10019","10019","10014","10018","11217","10029","10019","11201","10011","10065","11217","10009","10459","11211","10001","10019","11204","10003","11436","11211","10011","10025","10012","10016","10454","10312","10022","10028","10003","10021","10010","10314","11226","10011","11238","10001","10467","10470","10040","11211","10011","11423","10014","10022","11211","11211","10016","10014","11226","10029","11201","11213","10006","10016","10010","10002","10031","10011","11385","10033","10012","11104","11217","10001","11220","10040","11377","10036","10128","10028","10471","10004","10004","11206","10018","10038","10019","10009","10028","10016","10468","10468","10001","11235","11206","11249","11206","11225","10028","10014","10014","11222","10128","10128","11236","11208","10016","10036","11223","10017","11230","11379","10001","11201","10003","10065","11694","11229","10032","10013","10019","11238","10128","10028","11222","10007","10011","11238","11216","11217","11106","10017","10018","10007","11420","11215","10032","10003","10065","11235","10017","10028","10065","11230","10023","10023","10036","11217","10016","10022","10023","10011","11201","10006","10019","11207","11217","11221","11229","11217","10460","11219","11238","11378","11249","10019","10026","10025","10024","11217","10305","11201","10016","11419","11101","11207","11237","11106","10016","10010","10001","11375","10002","10013","11205","11233","10003","11201","11213","10314","11435","10013","11691","10017","11375","10465","11211","11217","11373","10021","10023","10016","10036","11373","10026","10025","10030","10026","10026","10019","11216","10023","10024","11217","11215","10025","10019","10023","10025","10025","11222","10034","11375","11360","11249","11215","10128","10128","11217","10304","10001","11238","10005","11106","10016","11379","11427","10004","11102","11372","11221","10065","10001","10012","10012","10022","10016","10459","11434","11104","11217","10308","11362","11222","10021","10308","11215","10028","11375","11249","11223","11249","11249","11375","11249","11361","10018","10128","11375","10128","11249","11230","11217","11217","10002","11217","11420","10014","11217","11217","10023","10472","10025","11238","10452","10065","11373","10001","11420","11233","11378","10011","11373","11435","11201","10012","11222","11222","10314","11217","11201","10037","11385","10010","11205","11355","10001","10065","11235","11224","10306","11217","10075","11201","10463","10003","11222","11208","11210","10018","10312","11220","10038","11222","11221","11226","11222","10456","11217","10019","11375","11101","11379","11421","10463","11214","11225","10038","10025","10465","11237","10016","10028","10027","11375","10023","11220","10462","11207","11233","11236","11226","11211","11385","11101","11211","11363","11226","10013","10312","10022","11691","10128","10003","10036","11106","11222","11374","11205","11101","11216","11225","10023","10001","10471","10010","10022","11217","11104","10001","10017","10013","11230","10031","10016","11101","10010","11216","10007","11211","11104","10301","11220","11249","11225","11102","11411","11385","11421","10009","10128","10012","10010","10314","10001","10009","11101","10029","10032","10022","10016","11101","11428","10033","11222","11101","11101","11211","11233","10016","10036","10065","10032","11206","10024","10014","10001","10027","10019","10036","10021","10011","10023","11234","10012","10006","10017","10014","10303","10004","10001","10021","10005","11213","10028","10001","10025","10001","10038","10023","10001","10014","11237","10028","10013","11206","10018","10021","10032","10065","10025","10002","11213","10028","10011","10025","10024","10016","10003","10022","10032","10001","10128","10032","10024","10025","10029","10021","10025","10022","11102","10001","10014","10065","10016","11237","10065","10016","10013","10306","10012","11101","10001","10022","10025","10021","10021","10002","10014","10032","10028","10065","10013","10021","10016","10016","10065","10065","10014","10003","10001","10022","11216","11206","10013","10002","10001","10014","10010","10019","10019","10010","10001","10017","11225","11201","10002","11214","10016","11219","10011","11374","11249","10021","10002","11421","10128","10004","10019","10009","11201","11234","11217","10065","10013","10014","10023","10019","11215","10001","11215","11229","10019","10023","11206","11215","11354","11217","11432","10001","10016","10032","10022","10463","11422","11225","11226","10032","10002","10032","10014","10025","10014","10019","11249","11221","10032","10014","10025","10011","10019","11219","10021","11226","10128","10032","10032","11106","10019","11249","10003","10014","10025","10025","10016","11214","10128","10016","10075","10033","10013","10032","11234","10014","11249","10025","10019","10014","11220","10013","11218","11432","10026","11356","10023","10005","11218","10004","11201","10009","10023","10001","10016","10021","10014","10032","11101","10024","10019","10012","11432","10025","10021","11237","10024","10014","10010","10021","11219","10018","10011","10025","10016","11201","10011","10001","10021","10019","10306","10002","11201","10453","11201","10025","10019","11201","10004","10010","10023","10019","10018","11215","10032","11226","10019","10022","10025","10021","11230","10016","10013","10038","10019","11222","10014","10016","10022","10003","10016","10012","10014","10034","10014","10011","10018","10004","10002","10022","11226","11201","11216","10128","11215","10011","10009","11215","11211","10019","10034","10014","10065","10016","10013","10034","11217","10014","11215","10001","11219","11217","10003","10065","11215","10128","11385","11201","11203","10001","11222","10009","10009","11217","10128","11206","10019","10038","10013","10014","10012","11225","11212","10032","10019","10030","10019","11232","11218","10013","10005","10002","10014","10001","11236","10003","10014","10005","10001","11385","10007","11216","10016","10033","11218","10003","10001","11201","10001","10034","10001","10027","10003","11215","10017","10314","10009","10019","10028","10011","11201","10019","11434","10065","11205","10010","10004","11217","11225","11220","10001","11435","11385","11222","11217","11215","10031","11215","10007","10014","10014","10014","11216","10001","10017","10018","11217","11201","11220","10001","11201","10014","10013","10032","10036","10038","10033","10312","10011","10001","10027","11237","10009","10009","11217","10036","11355","11101","11101","10128","10003","11229","10014","10006","11225","11356","11238","10065","10024","10010","11217","10040","11229","11201","10128","10314","10018","11203","10003","10013","11224","10002","11238","10459","10461","10037","11224","10038","10019","10022","10001","11217","11211","11213","10028","11373","10022","10004","11211","10065","11249","10001","10011","10019","10461","10028","10011","11358","10001","10006","10466","10014","10016","11691","10022","10128","10025","11233","10003","10026","11209","10010","10010","11213","10308","10010","10128","10022","11249","10011","10014","10471","11378","11208","11372","10128","10019","10019","10001","11102","11237","10034","11201","10016","10014","11238","11229","10455","10065","10033","10010","11385","11238","10471","11225","10019","10033","10007","11385","11385","10002","10023","10016","11103","10024","10019","10001","10029","11238","10038","10001","10028","10029","11249","10007","11229","11378","10021","11238","10034","10003","11356","11378","11229","11235","10032","10025","11201","10009","11201","11222","10001","10014","10010","10010","10035","10471","10021","10455","11213","10001","10044","11385","11216","10452","11232","10028","10018","11218","10065","10038","10033","11238","10036","10010","10012","10007","10025","10003","11105","10038","10007","10065","10128","11218","10018","10003","11215","11205","10128","10017","10065","10036","11230","11691","10001","10013","10011","11221","10128","11216","11106","10014","10014","10010","11201","11238","10025","11201","10314","10024","10036","10004","10001","11211","11222","10013","10002","10075","10025","10022","11230","10009","10005","11221","10011","11217","10128","10018","11238","10028","11217","11215","11213","10306","11221","11217","10018","11229","11217","11217","11217","10001","10026","11238","11211","11217","10028","10013","10065","11354","10021","10014","11354","11215","11217","11221","11217","11217","10038","11217","10016","10017","11411","10003","11232","10013","10016","11209","10128","10003","10029","10018","11222","10002","10030","10024","10001","11233","11211","10028","10018","10028","10010","11385","10016","10028","11101","10004","11238","10029","11232","10065","10019","11375","10030","10472","10013","10001","10467","10017","10017","10012","10003","10030","10016","10016","10007","11421","11218","11211","10006","10003","11204","11231","10065","11213","10011","10038","10005","10009","10028","10016","10016","10032","11422","11222","10301","10011","10004","10040","10036","10065","11354","10001","10038","10002","10065","10017","10017","11238","10023","10010","10001","10017","10019","11213","11101","10013","11223","11375","10024","10001","10028","11377","11224","10016","10010","11235","10009","10011","11104","10001","11238","10018","11231","10024","11226","11385","11211","10314","11218","11106","10013","10128","10024","10128","10001","10065","10128","10128","11385","11226","11421","11204","10032","10005","10006","10017","11229","10001","11101","10001","10038","11201","11208","11224","11222","11211","10065","10001","11216","11366","10027","10028","11229","11214","10006","10028","10023","10128","11429","11374","10001","10016","10017","10028","10017","10018","10029","10012","11102","10453","11235","10013","10002","11691","10027","10013","11220","10075","10010","10128","10016","10065","11235","10011","11215","10001","10028","11238","10011","10011","10002","10002","10025","10029","11249","11414","10002","11419","11101","10128","11385","10031","10001","10128","10128","10023","10018","10026","10028","10012","10010","10017","11218","11421","10065","11217","11204","11237","10022","10001","10016","10011","11224","10001","11358","11222","11215","10002","10016","11374","10031","10003","10006","10463","10006","10011","10035","10016","11224","11691","11226","11205","10013","11231","10017","11237","10019","11434","10024","10002","10001","11105","10010","11221","10016","11366","10028","11375","10019","10017","10001","10001","11217","10471","10006","11226","10013","10002","10005","11211","11237","10002","10010","11201","11238","10465","10128","10128","10017","10022","11237","10017","11420","11221","10003","10312","11385","11204","11222","10305","10032","10014","11422","10312","10030","11233","11103","11238","11232","10001","11374","11211","10065","11222","10016","10001","10065","10016","10012","11238","10023","10001","10016","10006","10001","11206","10006","10010","10017","10312","11218","11374","11102","11203","10314","10453","10010","10128","10032","10012","10002","10033","10001","10010","10040","10019","10009","10003","11105","10014","11420","10009","10065","11375","10002","10004","10038","11224","10016","10025","10004","10009","11215","10023","10004","10006","11435","11211","11235","10039","10467","10011","10025","10128","10026","11105","10001","10017","10128","10017","10128","10012","10011","10011","11205","11213","10018","10016","10013","10014","10017","11218","11224","10004","11222","11358","11378","10021","10012","11224","11222","10005","11225","10010","10026","10010","11354","10016","10017","10016","11230","11211","10013","11365","10030","10021","11231","11237","11102","11358","10026","11217","10021","10001","11375","11235","10028","11218","10002","10016","10037","10030","11213","10028","11369","11225","10028","11366","10023","11222","10019","11355","10016","11691","11373","10023","10023","11232","10128","11230","10012","11374","11217","11232","10001","10013","11433","11211","11224","10011","10003","11217","11219","11225","10014","11211","10022","10128","10013","10013","10029","10012","11215","10003","10017","10028","10012","10009","11105","10019","10036","10014","10016","10467","10022","11201","10011","11224","10005","11209","10128","10011","10461","11226","11221","10006","10038","10019","10012","11211","10033","10032","11414","11221","11205","11224","10004","10029","11201","10001","10019","10018","10038","10006","11216","11355","10019","10029","11375","11214","11221","11211","10044","10016","10005","11379","10039","10469","11215","10016","10031","10467","11220","10036","11377","10468","10128","11373","10009","10029","10001","10033","10032","11201","11224","10010","11224","10065","10028","11104","11225","11369","10069","10003","11209","11375","11210","11228","10038","10027","10128","11102","11362","11217","11356","11215","10007","10024","11205","10019","10019","11229","11218","11415","10019","10024","11417","10025","10038","11105","11238","10024","11105","10019","11216","10027","11357","10305","10001","11211","10452","11212","10075","10301","11217","10019","11201","11426","11221","11434","11226","11385","11221","10002","10027","10011","11237","11370","10463","10011","10023","10013","10029","10017","11215","11235","11230","10014","10036","11375","10038","10036","11231","11377","10012","10009","10016","10024","11249","10013","10016","10031","11204","10005","10075","11211","10010","11217","11222","10002","10306","11379","10463","10004","10019","11220","11217","10014","11207","11220","10009","11209","10023","10033","10011","10002","10001","10011","11215","10019","10012","10016","10022","11375","11224","10001","11224","10001","11105","10457","11238","10018","11201","11692","10019","10453","10019","11106","11366","10453","10016","11201","10006","11201","11224","11224","10003","11105","11217","10022","10128","11229","11361","10019","10028","10013","10011","10011","10038","10016","10019","10024","11211","10017","11211","10011","10314","10465","10018","10016","11211","11211","11238","10002","10021","11201","11215","10006","10027","10010","11222","10019","10025","10021","11232","11691","11375","10021","11221","11238","10001","10022","10027","10033","10075","11201","11201","10451","11201","10457","10029","10012","11216","11419","10032","10003","10002","11375","11104","10001","11238","10001","10006","10014","10026","10003","10065","11217","11215","10011","11374","10021","11211","11217","10128","11211","11211","10019","10022","10025","11211","10006","11375","11216","11235","10002","10016","10065","10014","11435","10019","10301","11249","10029","11211","11229","10023","10462","10006","10038","10006","11217","11211","10002","10471","10459","10016","10038","10075","10460","11231","11373","10017","11366","11378","10009","10019","11230","10040","11204","11215","11421","10019","10305","10017","10452","10012","11224","11215","10025","11414","11213","10036","11215","10022","11226","11201","10019","10019","10462","10028","10035","10467","10312","11226","11224","10003","10025","10038","10001","11224","10003","11224","11224","10306","11224","10019","10010","11211","11224","11201","11385","10028","11374","10001","11222","10001","11414","11217","11435","11217","11206","10463","10024","11201","11201","11222","10002","10012","11238","10001","11222","11232","10065","11375","10065","10012","10025","11211","10011","11230","11217","10028","10031","11211","10009","10019","11222","10024","10032","11209","11215","10029","10010","10001","11211","11385","10128","11211","10302","10038","10010","10001","11229","11221","11360","11201","11201","10001","11415","10022","10004","10461","10018","10003","11201","10023","10017","10036","10019","10065","10017","10065","10001","11106","10025","10128","10001","11217","11238","11231","11238","10024","10028","10019","10024","11215","10032","11106","10128","10001","10009","11201","11235","10022","10028","11691","11379","10016","10014","10128","11230","10016","10075","10009","11201","11230","10065","10010","11235","10017","10018","11421","10025","11103","10016","10017","10028","11238","11201","10005","10032","11217","11211","10007","10011","10032","10022","11222","10454","11206","10019","10017","11211","10314","11237","10028","10016","11355","11106","10027","11356","11201","11233","10006","10025","10075","10002","11374","11106","11224","11222","10016","10009","10017","10017","10065","11208","10308","10065","11432","10016","10016","10021","11221","10011","11223","10036","10027","11218","10128","10016","11213","11101","10030","10007","11225","11385","11201","11201","11206","10128","10128","11224","10009","10001","11217","10028","10011","11368","11222","10001","11216","10012","11215","11211","10001","11217","10306","10001","11224","11224","10005","10016","11213","10003","10471","11691","11354","10002","10003","10011","10019","11222","10011","10019","10032","10453","11217","10001","10005","10029","11385","10012","11365","10038","10021","10001","10023","11414","11215","10028","10013","11210","11225","10038","10003","10128","10026","10016","11221","11216","10019","10001","11224","10023","10016","10006","11205","10013","11217","10462","11206","10038","11201","10022","10470","10022","10016","10001","10038","10011","11224","10018","10028","10007","10025","11373","11224","11201","10001","10017","11249","10035","10001","10003","10016","11368","10011","10034","11220","10013","11105","10023","10017","10028","11215","10006","10033","10029","10029","11358","11215","11207","11366","11224","10001","10018","10128","10026","10017","10016","10013","11411","10002","11226","11366","10001","11216","10006","11204","11209","10002","10001","11209","11231","10028","10001","10024","10035","11229","11426","10021","11216","11219","10310","11217","11215","10001","11228","11201","10128","10004","10010","10016","10031","11233","10023","10006","10006","11230","10003","11214","10019","10128","10019","10024","10019","10128","10011","10011","11354","11385","11432","10128","11211","11215","10012","11104","11377","11205","10018","10024","10019","11214","10016","11201","10024","10016","10001","10024","10128","10001","10455","11206","10016","11205","10032","10006","10036","10016","10065","11221","11357","11215","11205","10001","10028","10001","10038","11434","10016","10007","11208","10019","10013","10128","11237","11222","11363","11211","10013","10017","11222","11218","10017","11224","10024","11101","11205","10003","10014","10009","10019","10065","10035","11229","11354","10314","11229","10471","10025","11213","11249","10011","10001","10308","10024","11235","11211","11385","11205","10012","10001","11354","10033","10013","11217","10033","10019","11205","10016","10006","11221","10028","10006","11214","11249","10038","11221","10017","10002","11207","10128","10128","10017","11385","11229","10452","10014","10024","10001","10314","11225","10023","10301","10035","11101","10004","11104","10001","11203","10012","11375","10022","10308","10022","10468","10023","10012","10016","11211","10033","10302","10065","11385","10011","10128","10001","11356","10001","10013","10016","10027","10016","10012","10128","10030","10024","10025","10013","10017","10013","10017","10017","10017","10030","10128","10128","11222","11385","11206","11234","10006","10028","10014","10014","10014","10014","10028","11218","10025","11225","10032","10001","10005","11104","10023","10001","11105","10011","10305","10001","10013","11218","10016","10022","10011","10017","10065","10022","10001","10001","10019","10065","11215","10038","10016","10022","11385","11420","10002","10002","10016","10010","10036","10030","10001","11101","11215","10019","11221","11432","11691","10128","10467","10021","10038","11205","10036","11238","10014","10022","10003","11217","10038","11237","10027","10036","10035","10305","10029","10012","10016","10025","11233","10016","10023","10001","10028","10010","10022","10017","10024","10016","11238","10024","11237","11215","10075","11234","10009","10018","11101","10016","11238","11224","10016","10017","11231","10001","11221","10019","10016","10016","11225","10021","10036","10010","10001","10007","11360","10003","10023","11101","10453","10013","10456","11204","10310","10016","10012","10010","10022","11224","10019","10011","10065","10075","10001","11101","10031","11226","11229","11218","10004","10002","10031","10019","10036","10014","10019","10021","10010","10011","10032","11215","10075","10016","10002","10001","10128","10040","10001","11215","11217","10014","10030","10016","10019","10016","11691","10017","11360","11101","10003","10036","10065","10306","11211","11213","11207","11356","11375","11221","11004","11225","10028","11211","10301","10014","10021","10012","11213","10019","10036","11201","10025","10009","10128","10001","11211","11373","10022","11214","10025","10474","11106","10451","10451","11225","10312","11432","10451","11106","10451","11215","11215","10467","11233","11210","10314","11420","10009","10003","10303","10031","10024","10032","10038","10011","10014","10019","11385","10034","10036","10001","10038","10016","10001","10307","10016","11205","10022","10019","10023","10018","10017","10065","10028","11230","10017","10022","11201","10027","10065","11205","10017","10006","10040","10028","10017","10065","10038","10032","10017","10026","10018","10032","10028","10309","11101","10036","11233","10065","11215","10016","10029","10029","10017","10017","11205","10036","11217","10075","10027","10038","10003","10033","10026","10013","10013","10001","10004","10036","10036","10036","10075","10011","10022","10065","11103","10036","11375","10036","10009","10036","10036","10036","10005","11375","10036","10019","10036","10036","10013","11101","10036","10036","11385","10002","11221","11207","11201","11104","11104","10025","10010","11235","10002","11220","10001","11201","10012","11249","11221","11217","10025","11373","10010","11201","11249","10302","10025","10466","11101","10023","10475","10025","10010","10036","11375","10019","10010","10019","10022","11223","11375","10029","10003","10302","11235","11204","11224","11220","10471","10019","10036","10310","10036","10302","11236","10036","10471","11235","11215","11217","10022","10022","10033","11375","10016","10016","10022","10023","10018","11375","10013","10014","10036","10128","10032","10038","11358","11207","11205","10021","11373","10040","10001","10023","11218","11226","11226","11238","10065","10024","10027","10075","11372","11435","11372","10024","10024","10002","10009","10024","10021","10009","10010","10021","10022","11232","11105","11418","11235","10003","10036","10031","10012","11215","10014","11375","11106","10017","10023","11232","11211","10003","10021","10019","11418","10032","10021","10456","10002","10013","10021","10021","10021","10022","10021","10021","10010","11369","11369","10013","11221","10002","10017","10002","11101","10013","10036","10013","10001","10032","10016","10473","10010","11426","10036","10019","10003","11375","11377","11366","10013","10466","11101","10466","10018","11377","11369","10032","11369","10003","10032","10013","10013","11375","10001","10036","10004","10013","11211","10013","11385","10009","10038","10029","10012","10001","10306","10013","11230","11226","10040","11201","11225","11211","10023","11106","11211","10016","10001","10001","10034","10065","11205","11211","11224","10475","11368","10009","10016","10031","10306","11201","10013","10001","10009","10018","10001","10012","10016","10001","10036","10023","10002","10001","11201","10029","10036","11211","10306","10023","10025","10024","10027","10002","11216","10006","11249","10027","10011","10036","10022","11355","10027","10024","10024","11414","10019","10005","10010","11221","10013","10014","10016","10011","10016","10011","11218","11233","10016","10011","11226","11238","11225","11216","11238","11218","11233","10036","11216","11216","10017","10036","10013","10474","10471","10011","10011","10019","11375","10009","11355","10032","10005","11233","10028","11355","10010","10029","10012","10022","10065","10025","11211","10011","10009","10002","10003","10002","11217","10022","10021","10022","10002","10005","10002","10128","10022","10022","10004","10005","10022","10019","10002","10065","10022","11385","10002","10021","10002","10005","10002","10128","10022","10025","10014","10010","10002","10009","10033","10002","10038","10022","10016","10022","10022","10034","10023","10013","10025","10002","10002","10018","10019","10002","10022","11249","10017","10065","10017","10002","11421","10022","10018","11230","11238","10010","10010","10001","10018","10040","10022","10001","10022","10013","10032","11355","10027","10027","11208","10003","10001","10002","10002","10022","10001","10038","11229","10016","10314","10016","11238","10027","10036","10023","10019","10001","10001","11205","10036","11225","11224","11224","10007","11249","10036","11223","11216","10004","10021","10128","10036","11225","10019","10029","10027","11216","10065","10022","10001","10032","10034","10028","10025","10009","10036","10033","10025","11215","10016","11432","11217","11230","10001","10001","10017","10009","10001","10013","10013","10021","10001","10025","10013","10002","10036","10021","10019","11218","10002","11211","10013","10021","10024","10028","10011","10069","10019","10013","10001","10038","10013","10036","10010","10025","10025","10019","10002","10016","10025","11211","10011","10001","10018","11218","11377","10019","10021","11237","10028","10459","10314","10011","10002","10033","10031","10018","11420","10001","10003","10007","11385","10034","10010","10022","10025","10011","10019","11215","11217","10016","10021","11230","10013","10001","10010","10021","10013","10028","10001","11375","10003","10010","10036","11221","10009","10010","10009","10009","10019","10002","10027","10001","11201","10452","11385","11217","10010","10001","11211","10023","10019","10019","10027","11213","10024","10016","10030","11101","10001","10460","11103","11432","10035","11104","10030","10467","11213","10001","11355","10016","11432","10468","10035","11354","10455","10005","10001","11377","10014","10029","10017","10001","10458","10024","11219","10003","10016","11377","10457","10029","10025","10001","10025","10025","10312","11373","10001","10019","10459","10467","10032","10011","11432","11221","11224","11102","11106","11105","10025","11205","11215","10065","10002","11368","10036","10002","10003","10036","10025","11201","11231","10033","10458","11104","10001","10029","11249","11249","11211","10027","10019","10065","11215","10001","11201","10007","10001","10001","10029","10065","11211","10065","11216","11229","11208","11213","10025","10032","11249","11222","11228","10006","10028","10011","11215","10003","11226","10312","10028","10028","10028","10019","11214","10012","11238","10001","10019","11215","10024","11217","10024","10032","10001","10065","10021","11249","11361","10028","11222","11214","10014","10001","10032","10016","10036","11223","10021","10038","11238","10011","10006","11239","11211","11249","11354","10024","10011","11249","11216","11214"]

def get_noise_stats(best_matches,zip_codes):
	# this creates a dict with a list of all the zip codes and how many times they each show up, aka how many noise compliants there are for each zip code
	zipcode_noise_complaints = {zip:zip_codes.count(zip) for zip in set(zip_codes)}
	neighborhood_noise_complaints = {}

	# print(sum(zipcode_noise_complaints.values())) #4637

	# this loops over the first dict
	for neighborhood, zips in best_matches.items():
		current_complaints = 0
		errors = 0

		try :
			# this loops over the array for each neighborhood
			for zip_code in zips:
				current_complaints += zipcode_noise_complaints.get(zip_code,0)
			neighborhood_noise_complaints[neighborhood] = current_complaints
		except:
			errors += 1

	print ("noise data = ")
	print (neighborhood_noise_complaints) # this is the final dict of neighborhoods to noise complaints

	# print (sum(neighborhood_noise_complaints.values())) #6114
	print ("errors: ", errors)

	return neighborhood_noise_complaints


def update_noise_score(noise_complaints):
	# check if neighborhood exists in noise dict
	for neighborhood in noise_complaints:
		# may not be able to filter on foreign key attribute
		nb_obj = Neighborhood.objects.filter(name=neighborhood)

		if nb_obj:
			nb_obj = nb_obj[0]
			# get all the scores for that nb
			score_list = Score.objects.filter(neighborhood=nb_obj)
			# if nb_score exists
			if score_list:
				score_list[0].noise_score = noise_complaints[neighborhood]
				score_list[0].save()
			else:
				# create nb_score
				nb_obj = Neighborhood.objects.get(name=neighborhood)
				score_list = Score.objects.create(
					neighborhood=nb_obj,
					night_life_score=0,
					commute_score=0,
					crime_score=0,
					noise_score=noise_complaints[neighborhood],				
				)
		else:
			print("didn't find nb_obj: ", neighborhood)

	return True
	print ("Done")

def run():
	complaints = get_noise_stats(best_matches,zip_codes)
	update_noise_score(complaints)














''' --------------------------------------------------------------------------------------------------------------- '''

# for i in zip_codes:
	
# 		if i in list(best_matches.values()): 
# 			# find the neighborhood from the value
# 			neighborhood = list(best_matches.keys())[list(best_matches.values()).index(i)]

# 			# if the neighborhood is alreay in the new dict then add 1 to the value aka # noise complaints
# 			if neighborhood in list(neighborhood_noise_complaints.keys()):  
# 				neighborhood_noise_complaints[neighborhood] += 1
# 			# if it is not already in the dict, then add the neighborhood to the new dict with a value of 1
# 			else:
# 				neighborhood_noise_complaints[neighborhood] = 1

# 			print (neighborhood)
# 			# print(count)
# 		else:
# 			# if the neighborhood is alreay in the new dict then add 1 to the value aka # noise complaints
# 			if i in list(not_here_dict.keys()):  
# 				not_here_dict[i] += 1
# 			# if it is not already in the dict, then add the neighborhood to the new dict with a value of 1
# 			else:
# 				not_here_dict[i] = 1

# 			print ("** NOT HERE **")
# 			not_here += 1
# 	except:
# 		print ("** ERROR **")
# 		errors += 1

# 	count +=1

# print ("\n")
# print ("errors: ", errors)

# print ("% errors: ", round(((errors/count)*100),5))
# print ("\n Dict of total noise complaints per neighborhood: ", neighborhood_noise_complaints)
# print ("\n Dict of missing zip codes: ", not_here_dict)


# this is just to check the total number of noise compliants in the final dict, it matches with original data
# total =0
# for i in list(neighborhood_noise_complaints.values()): 
# 	total += i
# print ("total: ", total)
# print ("total + errros + not here: ", total + errors + not_here)



